<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="preload" href="fonts.googleapis.com"/><title>Day 81 - Process Synchronization And Race Condition - zainsci-blog</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="A place for me, zainsci, to share what I learn about computers and programming."/><meta property="og:title" content="zainsci-blog"/><meta property="og:description" content="A place for me, zainsci, to share what I learn about computers and programming."/><meta property="og:image" content="https://zainsci.github.io/potrait.jpg"/><meta property="og:url" content="https://zainsci.github.io/blog"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:site_name" content="zainsci-blog"/><meta name="twitter:image:alt" content="zainsci&#x27;s portrait"/><meta name="next-head-count" content="13"/><link rel="preload" href="/blog/_next/static/css/84d451ea0fea089d896b.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/84d451ea0fea089d896b.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/blog/_next/static/chunks/webpack-08bb45713b568a3c61e0.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/framework-9bf9f61c21c28db23d5b.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/commons-0392153403293a8cddd0.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/main-06aae30c278b6ca2f76a.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/_app-03337388e7702cb579d9.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/296-8ee5d6e875fb38ba58c0.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-124259c81ad6abc14284.js" as="script"/></head><body><div id="__next"><header class="header"><div><h3 class="logo">zainsci-blog</h3><div class="nav__toggler"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div></div><nav class="nav"><ul class="nav__list"><li class="nav__item"><a class="nav__link" href="/blog">Home</a></li><li class="nav__item"><a href="https://zainsci.github.io" class="nav__link" target="_blank" rel="noopener noreferrer">Portfolio</a></li><li class="nav__item"><a class="nav__link" href="/blog/about">About</a></li><li class="nav__item"><a class="nav__link" href="/blog/contact">Contact</a></li><li class="nav__item"><div class="toggler"><a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></a></div></li></ul></nav></header><a class="skip-link" href="#main">Skip to main</a><main id="main"><article class="article" itemscope="" itemType="http://schema.org/Article"><div class="share"><p>Share</p><div class="share__buttons"><a href="https://twitter.com/intent/tweet?url=https://zainsci.github.ioday-81&amp;text=Day 81 - Process Synchronization And Race Condition
&amp;hashtags=zainsci,OperatingSystems" target="_blank" rel="noreferrer" class="share__button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://www.facebook.com/sharer/sharer.php?u=zainsci.github.io%2Fblogday-81" target="_blank" rel="noreferrer" class="share__button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a></div></div><header class="article__header"><h1 itemProp="headline">Day 81 - Process Synchronization And Race Condition</h1><div itemProp="datePublished">2021-03-22</div></header><section itemProp="articleBody" class="article__body"><p>This post was intended to be about how CPU scheduling works in Windows Operating System but that is for another day maybe but for today it will be about Process Synchronization and Race Condition.</p>
<h2>Process Synchronization</h2>
<p>Process synchronization deals with mechanisms to ensure the proper execution of all the process that share same logical address. Its basic purpose is to maintain data consistency. A cooperating process is a process that is affected or can be affected by another process executing in the same system.</p>
<p>Conxcurrently running processes without any sort of data protection scheme can manipulate data and produce an incorrect result. So we need to implement a mechanism to prevent this from happening by synchronizing processes. When more than two processes share and manupulate same data a <strong>Race Condition</strong> occurs.</p>
<h2>Race Conditions</h2>
<p>A race condition is a situation in which more than one process access and manipulate shared data at the same time. The final value of the shared data depends upon which process finishes at last. To prevent race conditions, processes running at the same time must be synchronized.</p>
<p>Consider the following procedure.</p>
<pre><code class="language-py">def deposit(amount):
  balance = balance + amount
</code></pre>
<p>Here we assume that the <code>balance</code> variable is shared by multiple processes. If two processes call the <code>deposit()</code> at the same time, something that you don't want to happen, can happen. The statement <code>balance = balance + amount</code> is implemented by the following sequence of instructions.</p>
<pre><code class="language-asm">Load  Reg, balance    ; loads the previous balance in register
Add   Reg, amount     ; add the amount
Store Reg, balance    ; updates the calculated amount back in balance
</code></pre>
<p>Now lets suppose that two process, P1 and P2 call the function <code>deposit()</code> at the same time with P1 as <code>deposit(10)</code> and P2 as <code>deposit(20)</code>. The initial balance is 100 and both processes run on different CPUs. It could happen like this:</p>
<p>P1 loads 100 into its register
P2 loads 100 into its register
P1 adds 10 to its register, giving 110
P2 adds 20 to its register, giving 120
P1 stores 110 in balance
P2 stores 120 in balance</p>
<p>But that is not what we want. We wanted it to output 130. This bug is called a <strong>race condition</strong> and this kind of bug is very difficult to debug as it occurs rarely and may disappear when you are trying to debug it. The only way to prevent this is through very careful coding. Some systems contains constructs called <strong>synchronization primitives</strong> to prevent this bug from occuring.</p>
</section></article><hr/></main><footer class="footer"><div>Copyright Â© <!-- -->2021<!-- --> zainsci</div><div>Built with Next.js by<!-- --> <a href="https://zainsci.github.io" target="_blank" rel="noopener noreferrer">zainsci</a></div><div><div class="social__icons"><a href="https://twitter.com/zainsci" target="_blank" rel="noreferrer noopener"><img src="/blog/assets/svgs/twitter.svg" alt="twitter logo"/></a><a href="https://instagram.com/zainsci" target="_blank" rel="noreferrer noopener"><img src="/blog/assets/svgs/instagram.svg" alt="instagram logo"/></a><a href="https://github.com/zainsci" target="_blank" rel="noreferrer noopener"><img src="/blog/assets/svgs/github.svg" alt="github logo"/></a></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Day 81 - Process Synchronization And Race Condition","date":"2021-03-22","slug":"day-81","content":"\u003cp\u003eThis post was intended to be about how CPU scheduling works in Windows Operating System but that is for another day maybe but for today it will be about Process Synchronization and Race Condition.\u003c/p\u003e\n\u003ch2\u003eProcess Synchronization\u003c/h2\u003e\n\u003cp\u003eProcess synchronization deals with mechanisms to ensure the proper execution of all the process that share same logical address. Its basic purpose is to maintain data consistency. A cooperating process is a process that is affected or can be affected by another process executing in the same system.\u003c/p\u003e\n\u003cp\u003eConxcurrently running processes without any sort of data protection scheme can manipulate data and produce an incorrect result. So we need to implement a mechanism to prevent this from happening by synchronizing processes. When more than two processes share and manupulate same data a \u003cstrong\u003eRace Condition\u003c/strong\u003e occurs.\u003c/p\u003e\n\u003ch2\u003eRace Conditions\u003c/h2\u003e\n\u003cp\u003eA race condition is a situation in which more than one process access and manipulate shared data at the same time. The final value of the shared data depends upon which process finishes at last. To prevent race conditions, processes running at the same time must be synchronized.\u003c/p\u003e\n\u003cp\u003eConsider the following procedure.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-py\"\u003edef deposit(amount):\r\n  balance = balance + amount\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHere we assume that the \u003ccode\u003ebalance\u003c/code\u003e variable is shared by multiple processes. If two processes call the \u003ccode\u003edeposit()\u003c/code\u003e at the same time, something that you don't want to happen, can happen. The statement \u003ccode\u003ebalance = balance + amount\u003c/code\u003e is implemented by the following sequence of instructions.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-asm\"\u003eLoad  Reg, balance    ; loads the previous balance in register\r\nAdd   Reg, amount     ; add the amount\r\nStore Reg, balance    ; updates the calculated amount back in balance\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow lets suppose that two process, P1 and P2 call the function \u003ccode\u003edeposit()\u003c/code\u003e at the same time with P1 as \u003ccode\u003edeposit(10)\u003c/code\u003e and P2 as \u003ccode\u003edeposit(20)\u003c/code\u003e. The initial balance is 100 and both processes run on different CPUs. It could happen like this:\u003c/p\u003e\n\u003cp\u003eP1 loads 100 into its register\r\nP2 loads 100 into its register\r\nP1 adds 10 to its register, giving 110\r\nP2 adds 20 to its register, giving 120\r\nP1 stores 110 in balance\r\nP2 stores 120 in balance\u003c/p\u003e\n\u003cp\u003eBut that is not what we want. We wanted it to output 130. This bug is called a \u003cstrong\u003erace condition\u003c/strong\u003e and this kind of bug is very difficult to debug as it occurs rarely and may disappear when you are trying to debug it. The only way to prevent this is through very careful coding. Some systems contains constructs called \u003cstrong\u003esynchronization primitives\u003c/strong\u003e to prevent this bug from occuring.\u003c/p\u003e\n","tags":["Operating-Systems"]}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"day-81"},"buildId":"nPzonidAvdPUfUHr-LiF0","assetPrefix":"/blog","isFallback":false,"gsp":true}</script><script nomodule="" src="/blog/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/blog/_next/static/chunks/webpack-08bb45713b568a3c61e0.js" async=""></script><script src="/blog/_next/static/chunks/framework-9bf9f61c21c28db23d5b.js" async=""></script><script src="/blog/_next/static/chunks/commons-0392153403293a8cddd0.js" async=""></script><script src="/blog/_next/static/chunks/main-06aae30c278b6ca2f76a.js" async=""></script><script src="/blog/_next/static/chunks/pages/_app-03337388e7702cb579d9.js" async=""></script><script src="/blog/_next/static/chunks/296-8ee5d6e875fb38ba58c0.js" async=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-124259c81ad6abc14284.js" async=""></script><script src="/blog/_next/static/nPzonidAvdPUfUHr-LiF0/_buildManifest.js" async=""></script><script src="/blog/_next/static/nPzonidAvdPUfUHr-LiF0/_ssgManifest.js" async=""></script></body></html>