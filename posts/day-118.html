<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Day 118 - Ownership &amp; Borrowing In Rust - zainsci-blog</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/7326876a07940d477f61.css" as="style"/><link rel="stylesheet" href="/_next/static/css/7326876a07940d477f61.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/webpack-cf19157f32f708f1dcac.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework-9bf9f61c21c28db23d5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/597-6f826541e039e1e04686.js" as="script"/><link rel="preload" href="/_next/static/chunks/778-0eca3c12d3dbfbf41974.js" as="script"/><link rel="preload" href="/_next/static/chunks/main-9ca82ec4d4aca520c43d.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-d0383bb574e856e8c82c.js" as="script"/><link rel="preload" href="/_next/static/chunks/885-1a3ba520d6a771969c4b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bslug%5D-38ecf2de6125847544d2.js" as="script"/></head><body><div id="__next"><header><h3 class="logo">zainsci-blog</h3><nav class="nav"><ul class="nav__list"><li class="nav__item"><a href="/" class="nav__link">Home</a></li><li class="nav__item"><a href="/portfolio" class="nav__link">Portfolio</a></li><li class="nav__item"><a href="/about" class="nav__link">About</a></li><li class="nav__item"><a href="/contact" class="nav__link">Contact</a></li><li class="nav__item"><div class="toggler"><a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></a></div></li></ul></nav></header><main><div class="share"><p>Share With Others</p><div class="share__buttons"><div class="share__button"><a href="https://twitter.com/intent/tweet?url=https://zainsci.github.ioday-118&amp;text=Day 118 - Ownership &amp; Borrowing In Rust
&amp;hashtags=zainsci,Rust,ProgrammingLanguage" target="_blank" rel="noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a></div><div class="share__button"><a href="https://www.facebook.com/sharer/sharer.php?u=zainsci.github.io%2Fblogday-118" target="_blank" rel="noreferrer"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a></div></div></div><article class="blog__post" itemscope="" itemType="http://schema.org/Article"><header><h1 itemProp="headline">Day 118 - Ownership &amp; Borrowing In Rust</h1><div itemProp="datePublished">2021-04-28</div></header><section itemProp="articleBody"><p>We now know how to assign variables, how to write comments and work with functions in Rust and now comes a concept that is unique to Rust Programming Language and that is Ownership. Ownership in Rust guarantees memory safety without the use of any Garbage Collector. We will look into what owendership is, what is borrowing and how Rust works with the memory.</p>
<h3>Ownership</h3>
<p>In other programming languages like C or C++ we have allocate memory ourselves to do some tasks and also you had to free the memroy yourself too. This not freeing memory can cause memory leaks and performance issues in the program. But Rust is different from these languages. Rust manages the memory with the help of the concept called Ownership while not slowing down the program.</p>
<p>Ownership is simple words is that every variable to which a value is assigned is the owner of that value and there can only be one owner at a time and when ever the owner goes out of scope, the value is droppped. To explain it in detail consider the following.</p>
<pre><code class="language-rs">fn main() {
    let name = String::from("Rust");

    print_name(name);

    println!("First: {}", name);
}

fn print_name(name: String) {
    println!("Second: {}", name);
}
</code></pre>
<p>We are using the type <code>String</code> here becuase the types we discussed earlier in the last post are allocate in the stack and are poped out when they are out of the scope but for this example we need a type that allocates the memory inside the heap. Heap is the place where the program dynamically allocates the memory.</p>
<p>If we compiled the code now using <code>cargo run</code> (we will learn about cargo in the next section) we will get the following error.</p>
<pre><code class="language-bash">Linux$ cargo run
   Compiling rust v0.1.0 (C:\Rust\rust)
error[E0382]: borrow of moved value: `name`
 --> src\main.rs:6:24
  |
2 |     let name = String::from("Rust");
  |         ---- move occurs because `name` has type `String`, which does not implement the `Copy` trait
3 |
4 |     print_name(name);
  |                ---- value moved here
5 |
6 |     println!("No. {}", name);
  |                        ^^^^ value borrowed here after move
</code></pre>
<p>When we provided the <code>name</code> var with type <code>String</code> to <code>print_name</code> function it transferred the ownership of the var <code>name</code> to the function <code>print_name</code> and the var got out of the scope and since there is only one owner to each value the compiler throws an error saying that the <code>println!(name)</code> cannot access the var <code>name</code>.</p>
<h3>Borrowing A Value</h3>
<p>To deal with the ownership problem (which is not a problem but a feature), we can use another concept called Borrowing. It does what it says. This means that we borrow a value from a variable and when the value is used it is returned back to the owner.</p>
<p>Now to change the code above we get the following.</p>
<pre><code class="language-rs">fn main() {
    let name = String::from("Rust");

    print_name(&#x26;name);

    println!("First: {}", name);
}

fn print_name(name: &#x26;String) {
    println!("Second: {}", name);
}
</code></pre>
<p>The only thing that is changed now is that there is an ampersand in <code>print_name(&#x26;name)</code> function call and in <code>print_name(name: &#x26;String)</code> function creation. What this will do is borrow the value from the <code>name</code> and when the function <code>print_name</code> returns, it will also return the value to the owner <code>name</code> and now if we compile the code it will look like this.</p>
<pre><code class="language-bash">Linux$ cargo run
   Compiling rust v0.1.0 (C:\Rust\rust)
    Finished dev [unoptimized + debuginfo] target(s) in 0.68s
     Running `target\debug\rust.exe`
Second: Rust
First: Rust
</code></pre>
<p>I hope i made the concepts of Ownership and Borrowing a little easier to understand but still I highly recommend <a href="https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html">this page</a> on the official Rust website for you to read to better understand Ownership and Borrowing.</p>
</section></article><br/><br/><br/><hr/></main><footer class="footer"><div>Copyright Â© <!-- -->2021<!-- --> zainsci</div><div>Built with Next.js by<!-- --> <a href="https://zainsci.github.io" target="_blank" rel="noopener noreferrer">zainsci</a></div><div><div><div class="social__icons undefined"><a href="https://twitter.com/zainsci" target="_blank" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://instagram.com/zainsci" target="_blank" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-instagram"><rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path><line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line></svg></a><a href="https://github.com/zainsci" target="_blank" rel="noreferrer noopener"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-github"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg></a></div></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Day 118 - Ownership \u0026 Borrowing In Rust","date":"2021-04-28","slug":"day-118","content":"\u003cp\u003eWe now know how to assign variables, how to write comments and work with functions in Rust and now comes a concept that is unique to Rust Programming Language and that is Ownership. Ownership in Rust guarantees memory safety without the use of any Garbage Collector. We will look into what owendership is, what is borrowing and how Rust works with the memory.\u003c/p\u003e\n\u003ch3\u003eOwnership\u003c/h3\u003e\n\u003cp\u003eIn other programming languages like C or C++ we have allocate memory ourselves to do some tasks and also you had to free the memroy yourself too. This not freeing memory can cause memory leaks and performance issues in the program. But Rust is different from these languages. Rust manages the memory with the help of the concept called Ownership while not slowing down the program.\u003c/p\u003e\n\u003cp\u003eOwnership is simple words is that every variable to which a value is assigned is the owner of that value and there can only be one owner at a time and when ever the owner goes out of scope, the value is droppped. To explain it in detail consider the following.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-rs\"\u003efn main() {\r\n    let name = String::from(\"Rust\");\r\n\r\n    print_name(name);\r\n\r\n    println!(\"First: {}\", name);\r\n}\r\n\r\nfn print_name(name: String) {\r\n    println!(\"Second: {}\", name);\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWe are using the type \u003ccode\u003eString\u003c/code\u003e here becuase the types we discussed earlier in the last post are allocate in the stack and are poped out when they are out of the scope but for this example we need a type that allocates the memory inside the heap. Heap is the place where the program dynamically allocates the memory.\u003c/p\u003e\n\u003cp\u003eIf we compiled the code now using \u003ccode\u003ecargo run\u003c/code\u003e (we will learn about cargo in the next section) we will get the following error.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eLinux$ cargo run\r\n   Compiling rust v0.1.0 (C:\\Rust\\rust)\r\nerror[E0382]: borrow of moved value: `name`\r\n --\u003e src\\main.rs:6:24\r\n  |\r\n2 |     let name = String::from(\"Rust\");\r\n  |         ---- move occurs because `name` has type `String`, which does not implement the `Copy` trait\r\n3 |\r\n4 |     print_name(name);\r\n  |                ---- value moved here\r\n5 |\r\n6 |     println!(\"No. {}\", name);\r\n  |                        ^^^^ value borrowed here after move\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWhen we provided the \u003ccode\u003ename\u003c/code\u003e var with type \u003ccode\u003eString\u003c/code\u003e to \u003ccode\u003eprint_name\u003c/code\u003e function it transferred the ownership of the var \u003ccode\u003ename\u003c/code\u003e to the function \u003ccode\u003eprint_name\u003c/code\u003e and the var got out of the scope and since there is only one owner to each value the compiler throws an error saying that the \u003ccode\u003eprintln!(name)\u003c/code\u003e cannot access the var \u003ccode\u003ename\u003c/code\u003e.\u003c/p\u003e\n\u003ch3\u003eBorrowing A Value\u003c/h3\u003e\n\u003cp\u003eTo deal with the ownership problem (which is not a problem but a feature), we can use another concept called Borrowing. It does what it says. This means that we borrow a value from a variable and when the value is used it is returned back to the owner.\u003c/p\u003e\n\u003cp\u003eNow to change the code above we get the following.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-rs\"\u003efn main() {\r\n    let name = String::from(\"Rust\");\r\n\r\n    print_name(\u0026#x26;name);\r\n\r\n    println!(\"First: {}\", name);\r\n}\r\n\r\nfn print_name(name: \u0026#x26;String) {\r\n    println!(\"Second: {}\", name);\r\n}\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThe only thing that is changed now is that there is an ampersand in \u003ccode\u003eprint_name(\u0026#x26;name)\u003c/code\u003e function call and in \u003ccode\u003eprint_name(name: \u0026#x26;String)\u003c/code\u003e function creation. What this will do is borrow the value from the \u003ccode\u003ename\u003c/code\u003e and when the function \u003ccode\u003eprint_name\u003c/code\u003e returns, it will also return the value to the owner \u003ccode\u003ename\u003c/code\u003e and now if we compile the code it will look like this.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-bash\"\u003eLinux$ cargo run\r\n   Compiling rust v0.1.0 (C:\\Rust\\rust)\r\n    Finished dev [unoptimized + debuginfo] target(s) in 0.68s\r\n     Running `target\\debug\\rust.exe`\r\nSecond: Rust\r\nFirst: Rust\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI hope i made the concepts of Ownership and Borrowing a little easier to understand but still I highly recommend \u003ca href=\"https://doc.rust-lang.org/book/ch04-01-what-is-ownership.html\"\u003ethis page\u003c/a\u003e on the official Rust website for you to read to better understand Ownership and Borrowing.\u003c/p\u003e\n","tags":["Rust","Programming-Language"]}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"day-118"},"buildId":"LbPSUhNNXBhA8kRCuBduJ","isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/_next/static/chunks/webpack-cf19157f32f708f1dcac.js" async=""></script><script src="/_next/static/chunks/framework-9bf9f61c21c28db23d5b.js" async=""></script><script src="/_next/static/chunks/597-6f826541e039e1e04686.js" async=""></script><script src="/_next/static/chunks/778-0eca3c12d3dbfbf41974.js" async=""></script><script src="/_next/static/chunks/main-9ca82ec4d4aca520c43d.js" async=""></script><script src="/_next/static/chunks/pages/_app-d0383bb574e856e8c82c.js" async=""></script><script src="/_next/static/chunks/885-1a3ba520d6a771969c4b.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bslug%5D-38ecf2de6125847544d2.js" async=""></script><script src="/_next/static/LbPSUhNNXBhA8kRCuBduJ/_buildManifest.js" async=""></script><script src="/_next/static/LbPSUhNNXBhA8kRCuBduJ/_ssgManifest.js" async=""></script></body></html>