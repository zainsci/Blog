<!DOCTYPE html><html><head><meta charSet="utf-8"/><link rel="preload" href="fonts.googleapis.com"/><title>Day 129 - Migrating From GatsbyJS To NextJS [1] - zainsci-blog</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta name="description" content="A place for me, zainsci, to share what I learn about computers and programming."/><meta property="og:title" content="zainsci-blog"/><meta property="og:description" content="A place for me, zainsci, to share what I learn about computers and programming."/><meta property="og:image" content="https://zainsci.github.io/potrait.jpg"/><meta property="og:url" content="https://zainsci.github.io/blog"/><meta name="twitter:card" content="summary_large_image"/><meta property="og:site_name" content="zainsci-blog"/><meta name="twitter:image:alt" content="zainsci&#x27;s portrait"/><meta name="next-head-count" content="13"/><link rel="preload" href="/blog/_next/static/css/84d451ea0fea089d896b.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/84d451ea0fea089d896b.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/blog/_next/static/chunks/webpack-d2ea490c71c2efdd01c9.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/framework-9bf9f61c21c28db23d5b.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/commons-0392153403293a8cddd0.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/main-06aae30c278b6ca2f76a.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/_app-d7d985800563919559a7.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/362-161b6498af4ad75ed6ae.js" as="script"/><link rel="preload" href="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-143c25a509ce81de2368.js" as="script"/></head><body><div id="__next"><header class="header"><div><h3 class="logo">zainsci-blog</h3><div class="nav__toggler"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div></div><nav class="nav"><ul class="nav__list"><li class="nav__item"><a class="nav__link" href="/blog">Home</a></li><li class="nav__item"><a href="https://zainsci.github.io" class="nav__link" target="_blank" rel="noopener noreferrer">Portfolio</a></li><li class="nav__item"><a class="nav__link" href="/blog/about">About</a></li><li class="nav__item"><a class="nav__link" href="/blog/contact">Contact</a></li><li class="nav__item"><div class="toggler"><a><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor" stroke="currentColor" stroke-width="2" class="feather feather-moon"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path></svg></a></div></li></ul></nav></header><a class="skip-link" href="#main">Skip to main</a><main id="main"><article class="article" itemscope="" itemType="http://schema.org/Article"><div class="share"><p>Share</p><div class="share__buttons"><a href="https://twitter.com/intent/tweet?url=https://zainsci.github.ioday-129&amp;text=Day 129 - Migrating From GatsbyJS To NextJS [1]
&amp;hashtags=zainsci,GatsbyJS,NextJS,JavaScript" target="_blank" rel="noreferrer" class="share__button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-twitter"><path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path></svg></a><a href="https://www.facebook.com/sharer/sharer.php?u=zainsci.github.io%2Fblogday-129" target="_blank" rel="noreferrer" class="share__button"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="feather feather-facebook"><path d="M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z"></path></svg></a></div></div><header class="article__header"><h1 itemProp="headline">Day 129 - Migrating From GatsbyJS To NextJS [1]</h1><div itemProp="datePublished">2021-05-09</div></header><section itemProp="articleBody" class="article__body"><p>Last time I did some makeover of all the files and folders of the GatsbyJS blog in accordance for it to work with the NextJS and changed code and so on and now I will be explaining a little more of what I did and why I did it.</p>
<h3>NextJS Pages</h3>
<p>In the last post I moved the <code>pages</code> folder to root dir from the <code>src</code> dir and after that also moved the js files <code>templates</code> dir to pages as well. Why i did this is because NextJS will render all the single files in the pages folder inside the root dir as a page in the browser. What this means that if there is a file named <code>contact.js</code> in the <code>pages</code> dir it will be a page in the browser with the path of <code>/contact/</code>.</p>
<pre><code class="language-md">index.js => /
contact.js => /contact/
about.js => /about/
</code></pre>
<p>Any dir inside the pages dir with an another .js file inside it will also be a page with path simillar to the one that is inside the <code>pages</code> dir.</p>
<pre><code class="language-md">/pages/blog/day01.js => /blog/page01
</code></pre>
<h3>Blog Pages With Markdown</h3>
<p>This part was most trouble for me as I had to make some changes in the current files and also changes in all the markdown files to render the pages differently for all the posts. Currently the markdown files are in the <code>/content/blog</code> directory and I will be using <a href="https://github.com/vercel/next.js/blob/canary/examples/blog-starter/lib/api.js">this</a> way of fetching all markdown files that they use in the <code>blog-starter</code> example they did with NextJS.</p>
<p>First i tried to fetch as is from the <code>contect/blog</code> dir changing the <code>postsDir</code> variable in the api file but somehow it was not working for me and also i had to deal with the images that I used in the markdown files that were in the same folder as the markdown file.</p>
<p>So what I did was that moved all the markdown files in the <code>_posts</code> folder and changed the current <code>gray-matter</code> that was like this:</p>
<pre><code class="language-md">---
title: Day 01
date: "2021-01-01"
tags:
  - Tag01
  - Tag02
---
</code></pre>
<p>To something like this:</p>
<pre><code class="language-md">---
title: Day 01
date: "2021-01-01"
cover: /assets/images/day01/cover.jpg
tags:
  - Tag01
  - Tag02
---
</code></pre>
<p>With this all had to do was to move files here and there instead of rewriting all the code that i copied from <code>NextJS/examples/blog-starter/lib/api.js</code> and also moved all the image files from their markdown folders to the public folder that NextJS uses for static files with <code>Day</code> with number as the parent folder to them.</p>
<p>Now after all this my root dir looks like this.</p>
</section></article><hr/></main><footer class="footer"><div>Copyright Â© <!-- -->2021<!-- --> zainsci</div><div>Built with Next.js by<!-- --> <a href="https://zainsci.github.io" target="_blank" rel="noopener noreferrer">zainsci</a></div><div><div class="social__icons"><a href="https://twitter.com/zainsci" target="_blank" rel="noreferrer noopener"><img src="/blog/assets/svgs/twitter.svg" alt="twitter logo"/></a><a href="https://instagram.com/zainsci" target="_blank" rel="noreferrer noopener"><img src="/blog/assets/svgs/instagram.svg" alt="instagram logo"/></a><a href="https://github.com/zainsci" target="_blank" rel="noreferrer noopener"><img src="/blog/assets/svgs/github.svg" alt="github logo"/></a></div></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Day 129 - Migrating From GatsbyJS To NextJS [1]","date":"2021-05-09","slug":"day-129","content":"\u003cp\u003eLast time I did some makeover of all the files and folders of the GatsbyJS blog in accordance for it to work with the NextJS and changed code and so on and now I will be explaining a little more of what I did and why I did it.\u003c/p\u003e\n\u003ch3\u003eNextJS Pages\u003c/h3\u003e\n\u003cp\u003eIn the last post I moved the \u003ccode\u003epages\u003c/code\u003e folder to root dir from the \u003ccode\u003esrc\u003c/code\u003e dir and after that also moved the js files \u003ccode\u003etemplates\u003c/code\u003e dir to pages as well. Why i did this is because NextJS will render all the single files in the pages folder inside the root dir as a page in the browser. What this means that if there is a file named \u003ccode\u003econtact.js\u003c/code\u003e in the \u003ccode\u003epages\u003c/code\u003e dir it will be a page in the browser with the path of \u003ccode\u003e/contact/\u003c/code\u003e.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-md\"\u003eindex.js =\u003e /\r\ncontact.js =\u003e /contact/\r\nabout.js =\u003e /about/\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAny dir inside the pages dir with an another .js file inside it will also be a page with path simillar to the one that is inside the \u003ccode\u003epages\u003c/code\u003e dir.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-md\"\u003e/pages/blog/day01.js =\u003e /blog/page01\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eBlog Pages With Markdown\u003c/h3\u003e\n\u003cp\u003eThis part was most trouble for me as I had to make some changes in the current files and also changes in all the markdown files to render the pages differently for all the posts. Currently the markdown files are in the \u003ccode\u003e/content/blog\u003c/code\u003e directory and I will be using \u003ca href=\"https://github.com/vercel/next.js/blob/canary/examples/blog-starter/lib/api.js\"\u003ethis\u003c/a\u003e way of fetching all markdown files that they use in the \u003ccode\u003eblog-starter\u003c/code\u003e example they did with NextJS.\u003c/p\u003e\n\u003cp\u003eFirst i tried to fetch as is from the \u003ccode\u003econtect/blog\u003c/code\u003e dir changing the \u003ccode\u003epostsDir\u003c/code\u003e variable in the api file but somehow it was not working for me and also i had to deal with the images that I used in the markdown files that were in the same folder as the markdown file.\u003c/p\u003e\n\u003cp\u003eSo what I did was that moved all the markdown files in the \u003ccode\u003e_posts\u003c/code\u003e folder and changed the current \u003ccode\u003egray-matter\u003c/code\u003e that was like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-md\"\u003e---\r\ntitle: Day 01\r\ndate: \"2021-01-01\"\r\ntags:\r\n  - Tag01\r\n  - Tag02\r\n---\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo something like this:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-md\"\u003e---\r\ntitle: Day 01\r\ndate: \"2021-01-01\"\r\ncover: /assets/images/day01/cover.jpg\r\ntags:\r\n  - Tag01\r\n  - Tag02\r\n---\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eWith this all had to do was to move files here and there instead of rewriting all the code that i copied from \u003ccode\u003eNextJS/examples/blog-starter/lib/api.js\u003c/code\u003e and also moved all the image files from their markdown folders to the public folder that NextJS uses for static files with \u003ccode\u003eDay\u003c/code\u003e with number as the parent folder to them.\u003c/p\u003e\n\u003cp\u003eNow after all this my root dir looks like this.\u003c/p\u003e\n","tags":["GatsbyJS","NextJS","JavaScript"]}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"day-129"},"buildId":"3TDQmkH-Lvl1I2zo70HVm","assetPrefix":"/blog","isFallback":false,"gsp":true}</script><script nomodule="" src="/blog/_next/static/chunks/polyfills-8683bd742a84c1edd48c.js"></script><script src="/blog/_next/static/chunks/webpack-d2ea490c71c2efdd01c9.js" async=""></script><script src="/blog/_next/static/chunks/framework-9bf9f61c21c28db23d5b.js" async=""></script><script src="/blog/_next/static/chunks/commons-0392153403293a8cddd0.js" async=""></script><script src="/blog/_next/static/chunks/main-06aae30c278b6ca2f76a.js" async=""></script><script src="/blog/_next/static/chunks/pages/_app-d7d985800563919559a7.js" async=""></script><script src="/blog/_next/static/chunks/362-161b6498af4ad75ed6ae.js" async=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-143c25a509ce81de2368.js" async=""></script><script src="/blog/_next/static/3TDQmkH-Lvl1I2zo70HVm/_buildManifest.js" async=""></script><script src="/blog/_next/static/3TDQmkH-Lvl1I2zo70HVm/_ssgManifest.js" async=""></script></body></html>