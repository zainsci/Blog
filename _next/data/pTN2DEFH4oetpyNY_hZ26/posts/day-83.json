{"pageProps":{"post":{"title":"Day 83 - Hardware Solution To Process Synchronization","date":"2021-03-24","slug":"day-83","content":"<p>Last time we learned about the Critical Section problem and how we can hanlde it in operating systems. Today we will be learning about how we can solve the critical section problem at the hardware level. Critical Section Problem can be easily solved on the hardware-level and is much difficult on the software-level as we can have physical barriers to solve the problem.</p>\n<p>The critical section problem can be solved in a single processor system at hardware level. We can stop interrupts to occur modification of shared variable so that the instruction can be executed without preemption. This solution is not applicable in multiprocessor system becasue disabling of interrupts is time consuming.</p>\n<p>Many machines provide hardware instruction to test and modify a word and swap the contents of the words automatically without any interruption. The TestAndSet instruction is executed atomically.</p>\n<p>The defination of TestAndSet is follows:</p>\n<pre><code class=\"language-py\">def TestAndSet(target):\r\n    rv = target\r\n    target = True\r\n    return rv\n</code></pre>\n<p>A machine that supports TestAndSet instruction, can implement mutual exclusion by using a boolean variable lock, initialized as false. The structure of such implementation is as follows:</p>\n<pre><code class=\"language-py\">while True:\r\n    while TestAndSet(lock):\r\n        # Critical Section\r\n    lock = False\r\n    # Remainder Section\n</code></pre>\n<p>The Swap instruction is also executed atomically and operates on two words to interchange their contents.</p>\n<pre><code class=\"language-py\">def Swap(a, b):\r\n    temp = a\r\n    a = b\r\n    b = temp\n</code></pre>\n<p>This way by using the boolean varibale we can halt the execution of more than one process that is using the same data.</p>\n<h2>Memory Barriers</h2>\n<p>There are two types of memory models that are implemented in computer architectures. <strong>Strongly</strong> and <strong>Waekly</strong> ordered.</p>\n<ul>\n<li><strong>Strongly ordered.</strong> In which the memory modification on one processor is immediately visible on all other processors.</li>\n<li><strong>Weakly ordered.</strong> In which memory modification on one processor may not be immediatelt visible on all other processors.</li>\n</ul>\n<p>Memory models vary by different processors types so code written for one kernel may not work for some processors. To address this issue, computer architectures provide instructions that can <em>force</em> any change in memory to be propagated to all other processors in the system. These instructions are called <strong>Memory Barrirs</strong>.</p>\n<p>When memory barrier instruction is performed, the system ensures that all loads and stores are completed before future loads and store operations are performed.</p>\n","tags":["Operating-Systems"]}},"__N_SSG":true}